<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.e10bbcaedeb5175ce902.css" id="gatsby-global-css">html{overflow-y:scroll;font-size:14px}h1{font-family:consolas,monaco,courier,courier new,fixed-width;font-size:1.5em;text-align:center;font-weight:500}p{line-height:1.9em}.Title-module--subtitleText--3jFUU{font-size:15px;font-weight:500;max-width:200px;margin:10px 5px 60px;color:#888;text-decoration:none;cursor:pointer}.Title-module--subtitleText--3jFUU:hover{border-bottom:1px solid #888}.Title-module--logoWithCss--3wEIC{display:grid;grid-template-areas:"1 2 3 a" "4 5 6 b " "7 8 9 c" "10 11 12 d";width:40px;margin:0 auto;height:40px;border:1px solid}.Title-module--logo--3JMg9{grid-column:3;grid-row:4}.Title-module--squareB--1Ox5x{margin:0;width:10px;height:10px;background:#000}.Title-module--squareW--3laYP{margin:0;width:10px;height:10px;background:#fff}.Title-module--headingStyles--1RN0_{margin-top:20px;text-align:center;justify-self:center;font-size:2em;font-variant:small-caps;text-decoration:none;color:#333}.Layout-module--main--3NgEk{font-family:consolas,monaco,courier,courier new,fixed-width,monospace;display:grid;margin:3vh auto auto;grid-template-columns:minmax(0,auto) min(600px,95vw) minmax(0,auto)}.Layout-module--header--3zaAq{grid-column:2;grid-row:1;margin-top:0;text-align:center;justify-self:center}.Layout-module--content--nwbxQ{grid-column:2;grid-row:2;justify-content:center;min-width:min(95vw,600px)}img{display:block;margin:auto}code,pre{background-color:#f5f5f5;overflow-x:auto;white-space:pre-wrap}pre{padding:10px}.Layout-module--divider--3g3SL,.Layout-module--dividerUpper--3NEoI{background:linear-gradient(90deg,hsla(0,0%,100%,0),#ccc,hsla(0,0%,100%,0));height:1px;margin:2em;border-style:dashed;border-color:#fff}.Layout-module--dividerUpper--3NEoI{opacity:1;transition:none!important}.Layout-module--date--v4T4_{text-align:center;color:#524f4f;font-weight:500}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeInUp{0%{opacity:0;transform:translate3d(0,100%,0)}to{opacity:1;transform:none}}@keyframes fadeInDown{0%{opacity:0;transform:translate3d(0,-100%,0)}to{opacity:1;transform:none}}@keyframes fadeInDownFromHighUp{0%{opacity:0;transform:translate3d(0,-75px,0)}to{opacity:1;transform:none}}@keyframes fadeInRight{0%{opacity:0;transform:translate3d(100%,0,0)}to{opacity:1;transform:none}}.scene-element{animation-duration:5s;animation-fill-mode:both}.fadeIn,.scene-element{transition-timing-function:ease-in}.fadeIn{animation-duration:.25s;animation-fill-mode:both;animation-name:fadeIn}.fadeDown{animation-duration:2s;animation-fill-mode:both;animation-name:fadeInDown}.fadeDown,.fadeDownFromHighUp{transition-timing-function:ease-in}.fadeDownFromHighUp{animation-duration:2s;animation-fill-mode:both;animation-name:fadeInDownFromHighUp}.scene-element--fadeinup{animation-name:fadeInUp}.scene-element--fadeinright{animation-name:fadeInRight}@keyframes svgAnimations-module--ballBounce--14o4x{to{background-position:0 -1536px}}.svgAnimations-module--bounce--2jIA4{animation:svgAnimations-module--ballBounce--14o4x 1s steps(24) infinite}.svgAnimations-module--bounce--2jIA4,.svgAnimations-module--scrollBounce--Gu0I6{width:64px;height:64px;background:url(/static/fbf_ball_bounce-f8f7aad3bbcbcf3dfc0b3d7480c04ea4.svg);margin:auto}.svgAnimations-module--scrollBounce--Gu0I6,.svgAnimations-module--starField--2ck0M{animation:svgAnimations-module--ballBounce--14o4x 4s linear infinite}.svgAnimations-module--starField--2ck0M{width:64px;height:64px;background:url(/static/starField-fca7fff17e17097bc71acf1789a2a959.svg);margin:auto}.ArticleLink-module--link--Q2esx{text-decoration:none;text-align:center;justify-self:center;margin-top:20px}.ArticleLink-module--linkTextStyle--2kQAU{text-decoration:none;color:#333}.ArticleLink-module--linkTextStyle--2kQAU:hover{border-bottom:1px solid #333}.ImageGrid-module--imageGrid--1nXoK{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr;grid-template-rows:auto;grid-gap:5px}.ImageGrid-module--lightbox--mXXyd{background:rgba(0,0,0,.5);left:0;top:0;width:100%;height:100%;position:fixed;z-index:500}.ImageGrid-module--previousButton--39FJ0{left:0;margin-left:2vw}.ImageGrid-module--nextButton--2ftlX,.ImageGrid-module--previousButton--39FJ0{top:50%;transform:translateY(-50%);position:fixed;z-index:6000;border:none;background:none;cursor:pointer}.ImageGrid-module--nextButton--2ftlX{right:0;margin-right:2vw}.ImageGrid-module--lightboxImage--290Va{position:fixed;top:50%;left:50%;transform:translate3D(-50%,-50%,0);max-height:90vh;height:auto;max-width:100vw;width:min(100vw,1800px);z-index:1000}.blogTemplate-module--divider--1eB9a{background:linear-gradient(90deg,hsla(0,0%,100%,0),#ccc,hsla(0,0%,100%,0));height:1px;margin:2em;border-style:dashed;border-color:#fff}.blogTemplate-module--date--wlawP{text-align:center;color:#524f4f;font-weight:500}</style><meta name="generator" content="Gatsby 2.28.2"/><style id="jss-server-side"></style><link as="script" rel="preload" href="/component---src-templates-blog-template-js-6c718ebafb10b62c8263.js"/><link as="script" rel="preload" href="/app-0c9d13cd3361251940a9.js"/><link as="script" rel="preload" href="/framework-dbb498007a7447f28d8e.js"/><link as="script" rel="preload" href="/styles-407fe62976dc5310c43e.js"/><link as="script" rel="preload" href="/webpack-runtime-dcd3cbc25a0495ca7b0b.js"/><link as="fetch" rel="preload" href="/page-data/blog/intoxicated-shrubbery/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout-module--main--3NgEk"><div class="Layout-module--header--3zaAq"><div><title>sandroid.dev</title><a class="Title-module--headingStyles--1RN0_" href="/"><div><div class="Title-module--logoWithCss--3wEIC"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgd2lkdGg9IjI0IgogICBoZWlnaHQ9IjI0IgogICB2aWV3Qm94PSIwIDAgMjQgMjQiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2Zzg0NSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ibG9nby5zdmciCiAgIGlua3NjYXBlOnZlcnNpb249IjEuMC4xICgzYmMyZTgxM2Y1LCAyMDIwLTA5LTA3KSI+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhODUxIj4KICAgIDxyZGY6UkRGPgogICAgICA8Y2M6V29yawogICAgICAgICByZGY6YWJvdXQ9IiI+CiAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICAgICAgPGRjOnR5cGUKICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPgogICAgICA8L2NjOldvcms+CiAgICA8L3JkZjpSREY+CiAgPC9tZXRhZGF0YT4KICA8ZGVmcwogICAgIGlkPSJkZWZzODQ5IiAvPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSIxMDE3IgogICAgIGlkPSJuYW1lZHZpZXc4NDciCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOnpvb209IjExLjMxMzcwOSIKICAgICBpbmtzY2FwZTpjeD0iLTE2LjM3MTUwNCIKICAgICBpbmtzY2FwZTpjeT0iLTMuMTMwMTkzMSIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iLTgiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii04IgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnODQ1IiAvPgogIDxyZWN0CiAgICAgc3R5bGU9ImZpbGw6I2Q0NTUwMDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MC43NTU5MDYiCiAgICAgaWQ9InJlY3Q4NzUiCiAgICAgd2lkdGg9IjYuNzExNTY2NCIKICAgICBoZWlnaHQ9IjkuMTcxMzAyOCIKICAgICB4PSI4LjY0NDIxNjUiCiAgICAgeT0iNi40MzAwMjU2IiAvPgogIDxyZWN0CiAgICAgc3R5bGU9ImZpbGw6I2Q0NTUwMDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MC43NTU5MDYiCiAgICAgaWQ9InJlY3Q4NzkiCiAgICAgd2lkdGg9IjIuNDk0ODc1NCIKICAgICBoZWlnaHQ9IjYuODUyMTIyOCIKICAgICB4PSI4LjY0ODc4MjciCiAgICAgeT0iMTUuMjY5MzU2IiAvPgogIDxyZWN0CiAgICAgc3R5bGU9ImZpbGw6I2Q0NTUwMDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MC43NTU5MDYiCiAgICAgaWQ9InJlY3Q4NzktMiIKICAgICB3aWR0aD0iMi40OTQ4NzU0IgogICAgIGhlaWdodD0iNi44NTIxMjI4IgogICAgIHg9IjEyLjg2NTQ3NSIKICAgICB5PSIxNS4yNjkzNTYiIC8+CiAgPHJlY3QKICAgICBzdHlsZT0iZmlsbDojZDQ1NTAwO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDowLjc1NTkwNiIKICAgICBpZD0icmVjdDg3OS0yLTAiCiAgICAgd2lkdGg9IjIuNDk0ODc1NCIKICAgICBoZWlnaHQ9IjYuODUyMTIyOCIKICAgICB4PSItOC45NDkxOTk3IgogICAgIHk9IjE1LjE2ODY5MSIKICAgICB0cmFuc2Zvcm09InJvdGF0ZSgtOTAuMDkxNzUpIiAvPgogIDxyZWN0CiAgICAgc3R5bGU9ImZpbGw6I2Q0NTUwMDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MC43NTU5MDYiCiAgICAgaWQ9InJlY3Q4NzktMi0wLTIiCiAgICAgd2lkdGg9IjIuNDk0ODc1NCIKICAgICBoZWlnaHQ9IjYuODUyMTIyOCIKICAgICB4PSItOC44OTM4MjkzIgogICAgIHk9IjEuODQ3OTU1MiIKICAgICB0cmFuc2Zvcm09InJvdGF0ZSgtODkuODIwODk0KSIgLz4KICA8Y2lyY2xlCiAgICAgc3R5bGU9ImZpbGw6I2Q0NTUwMDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MC43NTU5MDYiCiAgICAgaWQ9InBhdGg5MjYiCiAgICAgY3g9IjEyIgogICAgIGN5PSIzLjE1ODAzOTYiCiAgICAgcj0iMi4yNjEwODUzIiAvPgo8L3N2Zz4K" class="Title-module--logo--3JMg9"/></div></div>sandroid.dev</a><p><a class="Title-module--subtitleText--3jFUU" href="/about">About</a><a class="Title-module--subtitleText--3jFUU" href="/friends">Friends</a><a href="https://instagram.com/sandroid_dreams" class="Title-module--subtitleText--3jFUU">Instagram</a></p></div></div><div class="Layout-module--content--nwbxQ"><div class="Layout-module--dividerUpper--3NEoI"></div><div class="fadeIn"><div class="blog-post-container"><div class="blog-post"><h1>Intoxicated Shrubbery</h1><div class="blogTemplate-module--date--wlawP">December 24, 2020</div><div class="blogTemplate-module--divider--1eB9a"></div><div class="blog-post-content"><p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/aa5593aef83d44772bcba35905c5498d/56d81/drunk_trees.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 130.99999999999997%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAe4WdFRESlbSsCP/xAAZEAACAwEAAAAAAAAAAAAAAAABIAIQIRH/2gAIAQEAAQUCQGpHO6n/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ak//xAAZEAEAAwEBAAAAAAAAAAAAAAABABARIGH/2gAIAQEAAT8hhzCeoY3B0or/2gAMAwEAAgADAAAAEGj2gP/EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/ECn/xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QIOT/xAAbEAEAAwADAQAAAAAAAAAAAAABABEhEEFRMf/aAAgBAQABPxC4ruuOpokGMqcdT4TGrlQ+kA8IDcOP/9k='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Plotting result"
        title="Plotting result"
        src="/static/aa5593aef83d44772bcba35905c5498d/4b190/drunk_trees.jpg"
        srcset="/static/aa5593aef83d44772bcba35905c5498d/e07e9/drunk_trees.jpg 200w,
/static/aa5593aef83d44772bcba35905c5498d/066f9/drunk_trees.jpg 400w,
/static/aa5593aef83d44772bcba35905c5498d/4b190/drunk_trees.jpg 800w,
/static/aa5593aef83d44772bcba35905c5498d/e5166/drunk_trees.jpg 1200w,
/static/aa5593aef83d44772bcba35905c5498d/b17f8/drunk_trees.jpg 1600w,
/static/aa5593aef83d44772bcba35905c5498d/56d81/drunk_trees.jpg 2117w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<p>This plotting was inspired by some shrubbery I saw on The Downs in Bristol. All of the thick shrubs seemed to grow in a nice parabolic arc, with the tallest branches growing from the center, and the height decreasing smoothly the further you went from the middle. The perfect simple rules to have a computer follow. The basic algorithm is as follows:</p>
<ol>
<li>Choose a point on the bottom edge of the page to start a branch.</li>
</ol>
<pre><code class="language-Java">int delta = int(random(-3000,2000));
i=0;
x= xMax;
y = int(HORIZONTAL_CENTER + delta);
</code></pre>
<ol start="2">
<li>
<p>Depending on the distance of the point from the horizontal center, choose a random <em>mass</em> for the branch. The further from the middle, the smaller the <em>mass</em>.</p>
<pre><code class="language-Java">mass = int(random(8, 180 - abs(delta)/12)); // Quick solution with trial and error. You could do better by using a formula for a curve.
</code></pre>
</li>
<li>
<p>Choose a new point, a random distance away from the last point. The point has a bias towards negative x (up on the sheet), so the branches grow upwards.</p>
<pre><code class="language-Java">  x = int(x + spacing*random(-2, 1));
  y = int(y + spacing*random(-1, 1));
</code></pre>
</li>
<li>
<p>Draw a line between the original point and the new point, and increase mass used by 1.</p>
<pre><code class="language-Java">  i=0;
</code></pre>
</li>
<li>
<p>Repeat steps 3 and 4 until either all the <em>mass</em> has been used up, or the branch goes out of bounds of the drawing area.</p>
<pre><code class="language-Java">  if ( x > xMin &#x26;&#x26; x &#x3C; xMax &#x26;&#x26; y > yMin &#x26;&#x26; y &#x3C; yMax &#x26;&#x26; i &#x3C; mass &#x26;&#x26; iterations &#x3C; MAX_ITERATIONS) {
      line_clipped(x0, y0, x, y, up); // draws lines only if they're in the reduced drawing area
      i=i+1; // increase mass used
      up = false;
  }
</code></pre>
</li>
</ol>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/bc2d4ef48d4f8c0febd1ff08f65bd913/9568a/drunk_trees_closeup.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 133.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHqLopdplNSZeZqhof/xAAbEAACAwADAAAAAAAAAAAAAAAAAQIREgMgIf/aAAgBAQABBQIv0nKhs2PjswYXT//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABcRAQEBAQAAAAAAAAAAAAAAAAABERL/2gAIAQIBAT8BkctbX//EABUQAQEAAAAAAAAAAAAAAAAAACBB/9oACAEBAAY/AlV//8QAHRAAAgICAwEAAAAAAAAAAAAAAAERMSFBIFFxgf/aAAgBAQABPyGRRCeDUsoe0zCUxFpfS24FF37w/9oADAMBAAIAAwAAABB//L7/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxAp/8QAFxEBAQEBAAAAAAAAAAAAAAAAAAERYf/aAAgBAgEBPxDZtKdn/8QAHRAAAgMAAgMAAAAAAAAAAAAAAREAIUExYRBxkf/aAAgBAQABPxApzKB8lRrQLAqV67jrhc6IOwCZCuryGCwDiQA9MxhQe3wB8CCf/9k='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Plotting result closeup"
        title="Plotting result closeup"
        src="/static/bc2d4ef48d4f8c0febd1ff08f65bd913/4b190/drunk_trees_closeup.jpg"
        srcset="/static/bc2d4ef48d4f8c0febd1ff08f65bd913/e07e9/drunk_trees_closeup.jpg 200w,
/static/bc2d4ef48d4f8c0febd1ff08f65bd913/066f9/drunk_trees_closeup.jpg 400w,
/static/bc2d4ef48d4f8c0febd1ff08f65bd913/4b190/drunk_trees_closeup.jpg 800w,
/static/bc2d4ef48d4f8c0febd1ff08f65bd913/e5166/drunk_trees_closeup.jpg 1200w,
/static/bc2d4ef48d4f8c0febd1ff08f65bd913/b17f8/drunk_trees_closeup.jpg 1600w,
/static/bc2d4ef48d4f8c0febd1ff08f65bd913/9568a/drunk_trees_closeup.jpg 3024w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<pre><code class="language-Java">void draw() {
  int spacing = 100;
  int x0, y0;
  int MAX_ITERATIONS = 300;

  x0 = x;
  y0 = y;

  x = int(x + spacing*random(-2, 1));
  y = int(y + spacing*random(-1, 1));

  if ( x > xMin &#x26;&#x26; x &#x3C; xMax &#x26;&#x26; y > yMin &#x26;&#x26; y &#x3C; yMax &#x26;&#x26; i &#x3C; mass &#x26;&#x26; iterations &#x3C; MAX_ITERATIONS) {
      line_clipped(x0, y0, x, y, up); // draws lines only if they're in the reduced drawing area
      i=i+1;
      up = false;

  } else {
    int delta = int(random(-3000,2000));
    i=0;
    x= xMax;
    y = int(HORIZONTAL_CENTER + delta);
    mass = int(random(8, 180 - abs(delta)/12)); // Hacky way of getting shorter branches when they start nearer to the edge
    iterations = iterations + 1;
    up = true; // lift the pen if a branch is finished

    int pen = round(random(1, 2));
    if (pen != currentPen) {
      plotter.write("SP"+ pen + ";", 3000); //Select pen
      plotter.write("PU"+x+","+y+";", 4000); //Position pen
      println("pen: " + pen);
    }
    currentPen = pen;

  }

  if (iterations == MAX_ITERATIONS) {
      plotter.write("PU"+0+","+0+";"); //Position pen at origin when done plotting

  }

}
</code></pre>
<p>And that's it!</p>
<p>Complete Processing code with all of the surrounding stuff:</p>
<pre><code class="language-Java">  import processing.serial.*;

  Serial myPort;    // Create object from Serial class
  Plotter plotter;  // Create a plotter object
  int val;          // Data received from the serial port
  int lf = 10;      // ASCII linefeed

  //Enable plotting?
  boolean PLOTTING_ENABLED = true;
  boolean draw_box = false;
  boolean draw_label = true;
  boolean up = true;

  boolean just_draw = false;


  //Label
  String dateTime = day() + "/" + month() + "/" + year() + " " + hour() + ":" + minute() + ":" + second() + " - ";
  String label = dateTime + "INTOXICATED SHRUBBERY IV";

  //Plotter dimensions
  int xMin = 600;
  int yMin = 800;
  int xMax = 10300 - 300;
  int yMax = 8400 - 600;
  int A4_MAX_WIDTH = 10887;
  int A4_MAX_HEIGHT = 8467;
  int VERTICAL_CENTER = (xMax + xMin) /2;
  int HORIZONTAL_CENTER = (yMax + yMin) /2;


  int i = 0;
  int iterations = 0;
  int lastY = yMin;
  int currentPen = 1;

  int x = -9999999;
  int y = -9999999;
  int mass = 50;

  //Let's set this up
  void setup() {
    print(dateTime);
    background(233, 233, 220);
    size(840, 1080);
    smooth();

    if (just_draw) {
      draw_box = false;
      draw_label = false;
      PLOTTING_ENABLED = true;
    }

    //Select a serial port
    println(Serial.list()); //Print all serial ports to the console
    String portName = Serial.list()[1]; //make sure you pick the right one
    println("Plotting to port: " + portName);

    //Open the port
    myPort = new Serial(this, portName, 9600);
    myPort.bufferUntil(lf);

    //Associate with a plotter object
    plotter = new Plotter(myPort);

    //Initialize plotter
    plotter.write("IN;SP2;");
    //Draw a label first (this is pretty cool to watch)

    if (draw_label) {
    int labelX = xMax + 300;
    int labelY = yMin;

    if (PLOTTING_ENABLED) {
      plotter.write("PU"+labelX+","+labelY+";"); //Position pen
      plotter.write("SI0.14,0.14;DI0,1;LB" + label + char(3)); //Draw label
      println("drawing label");
      delay(label.length() * 500);
      println("label done");
    }

    fill(50);
    float textX = map(labelX, 0, A4_MAX_HEIGHT, 0, width);
    float textY = map(labelY, 0, A4_MAX_WIDTH, 0, height);

    text(dateTime + label, textY, textX);
    }

    if (draw_box) {

      //box
      drawLine(xMin, yMin, xMax, yMin, true);
      drawLine(xMax, yMin, xMax, yMax, true);
      drawLine(xMax, yMax, xMin, yMax, true);
      drawLine(xMin, yMax, xMin, yMin, true);

      // diagonals
      drawLine(xMin, yMin, xMax, yMax, true);
      drawLine(xMin, yMax, xMax, yMin, true);

      //vertical line down from middle
      line_clipped(xMin, (yMax + yMin) /2, xMax, (yMax + yMin) /2, true);

      //horizontal line
      line_clipped((xMax + xMin) /2, yMin, (xMax + xMin) /2, yMax, true);
    }

  }

  void draw() {
    int spacing = 100;
    int x0, y0;
    int MAX_ITERATIONS = 150;

    //horizontal line
    x0 = x;
    y0 = y;

    x = int(x + spacing*random(-2, 1));
    y = int(y + spacing*random(-1, 1));

    if ( x > xMin &#x26;&#x26; x &#x3C; xMax &#x26;&#x26; y > yMin &#x26;&#x26; y &#x3C; yMax &#x26;&#x26; i &#x3C; mass &#x26;&#x26; iterations &#x3C; MAX_ITERATIONS) {
        line_clipped(x0, y0, x, y, up);
        i=i+1;
        up = false;

    } else {

      int delta = int(random(-3000,2000));
      println("delta=" + delta);
      x = int(VERTICAL_CENTER + random(-5, 5));
      y = int(HORIZONTAL_CENTER + delta);
      x= xMax;
      i=0;
      mass = int(random(8, 180 - abs(delta)/12));
      println(iterations);
      iterations = iterations + 1;
      up = true;

      int pen = round(random(1, 2));
      currentPen = pen;
      if (pen != currentPen) {
        plotter.write("SP"+ pen + ";", 3000); //Select pen
        plotter.write("PU"+x+","+y+";", 4000); //Position pen
        println("pen: " + pen);
      }


    }

    if (iterations == MAX_ITERATIONS) {
        plotter.write("PU"+0+","+0+";"); //Position pen
    }

  }
  /*
  * Encode a given point (x, y) into the different regions of
  * a clip window as specified by its top-left corner (cx, cy)
  * and it's width and height (cw, ch).
  */
  int encode_endpoint(
    float x, float y,
    float clipx, float clipy, float clipw, float cliph)
  {
    int code = 0; /* Initialized to being inside clip window */

    /* Calculate the min and max coordinates of clip window */
    float xmin = clipx;
    float xmax = clipx + cliph;
    float ymin = clipy;
    float ymax = clipy + clipw;

    if (x &#x3C; xmin)       /* to left of clip window */
      code |= (1 &#x3C;&#x3C; 0);
    else if (x > xmax)  /* to right of clip window */
      code |= (1 &#x3C;&#x3C; 1);

    if (y &#x3C; ymin)       /* below clip window */
      code |= (1 &#x3C;&#x3C; 2);
    else if (y > ymax)  /* above clip window */
      code |= (1 &#x3C;&#x3C; 3);

    return code;
  }

  boolean line_clipped(
    float x0, float y0, float x1, float y1, boolean up) {

    float clipx = xMin;
    float clipy = yMin;
    float clipw = yMax-yMin;
    float cliph = xMax-xMin;



    /* Stores encodings for the two endpoints of our line */
    int e0code, e1code;

    /* Whether the line should be drawn or not */
    boolean accept = false;
    int tries = 0;

    do {
      /* Get encodings for the two endpoints of our line */
      e0code = encode_endpoint(x0, y0, clipx, clipy, clipw, cliph);
      e1code = encode_endpoint(x1, y1, clipx, clipy, clipw, cliph);
      tries = tries + 1;
      if (tries > 3) {
        println("tried too many times;");
        break;
      }

      if (e0code == 0 &#x26;&#x26; e1code == 0) {
        /* If line inside window, accept and break out of loop */
        accept = true;
        break;
      } else if ((e0code &#x26; e1code) != 0) {
        /*
        * If the bitwise AND is not 0, it means both points share
        * an outside zone. Leave accept as 'false' and exit loop.
        */
        break;
      } else {
        /* Pick an endpoint that is outside the clip window */
        int code = e0code != 0 ? e0code : e1code;

        float newx = 0, newy = 0;

        /*
        * Now figure out the new endpoint that needs to replace
        * the current one. Each of the four cases are handled
        * separately.
        */
        if ((code &#x26; (1 &#x3C;&#x3C; 0)) != 0) {
          /* Endpoint is to the left of clip window */
          //println("/* Endpoint is above the clip window */");

          newx = xMin;
          newy = ((y1 - y0) / (x1 - x0)) * (newx - x0) + y0;
        } else if ((code &#x26; (1 &#x3C;&#x3C; 1)) != 0) {
          /* Endpoint is to the right of clip window */
          //println("/* Endpoint is below the clip window */");

          newx = xMax;
          newy = ((y1 - y0) / (x1 - x0)) * (newx - x0) + y0;
        } else if ((code &#x26; (1 &#x3C;&#x3C; 3)) != 0) {
          /* Endpoint is above the clip window */
          //println("/* Endpoint is to the right of the clip window */");
          newy = yMax;
          newx = ((x1 - x0) / (y1 - y0)) * (newy - y0) + x0;
        } else if ((code &#x26; (1 &#x3C;&#x3C; 2)) != 0) {
          /* Endpoint is below the clip window */
          //println(" /* Endpoint is to the left of the clip window */");
          newy = yMin;
          newx = ((x1 - x0) / (y1 - y0)) * (newy - y0) + x0;
        }

        /* Now we replace the old endpoint depending on which we chose */
        if (code == e0code) {
          x0 = newx;
          y0 = newy;
        } else {
          x1 = newx;
          y1 = newy;
        }
        tries = tries +1;
      }
    } while (true);


    if (accept) {
      drawLine(x0, y0, x1, y1, up);
    }

    return accept;
  }

  void drawLine(float x1, float y1, float x2, float y2, boolean up) {
    float _x1 = map(x1, 0, A4_MAX_HEIGHT, 0, width);
    float _y1 = map(y1, 0, A4_MAX_WIDTH, 0, height);

    float _x2 = map(x2, 0, A4_MAX_HEIGHT, 0, width);
    float _y2 = map(y2, 0, A4_MAX_WIDTH, 0, height);
    line(_y1, _x1, _y2, _x2);

    String pen = "PD";
    if (up) {
      pen="PU";
    }


    plotter.write(pen+x1+","+y1+";");
    plotter.write("PD"+x2+","+y2+";"); //75 ms delay

    if (PLOTTING_ENABLED) {
      delay(200);
    }
  }

  void drawPoint(int x, int y) {
    float _x = map(x, 0, A4_MAX_HEIGHT, 0, width);
    float _y = map(y, 0, A4_MAX_WIDTH, 0, height);

    plotter.write("PU"+x+","+y+";"); //Position pen
    plotter.write("PD"+x+","+y+";"); //Position pen

    point(_y, _x);
    if (PLOTTING_ENABLED) {
      delay(250);
    }
  }



  /*************************
  Simple plotter class
  *************************/

  class Plotter {
    Serial port;

    Plotter(Serial _port) {
      port = _port;
    }

    void write(String hpgl) {
      if (PLOTTING_ENABLED) {
        port.write(hpgl);
      }
    }

    void write(String hpgl, int del) {
      if (PLOTTING_ENABLED) {
        port.write(hpgl);
        delay(del);
      }
    }
  }
</code></pre></div></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/intoxicated-shrubbery";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-a0c9186328768889dad2.js"],"app":["/app-0c9d13cd3361251940a9.js"],"component---src-pages-experiments-svg-animations-js":["/component---src-pages-experiments-svg-animations-js-19dc08f732ea59878b57.js"],"component---src-pages-index-js":["/component---src-pages-index-js-64cfbe6ee2e18a0ce73e.js"],"component---src-pages-rolls-1-js":["/component---src-pages-rolls-1-js-04e266a774b48c615ef8.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-6c718ebafb10b62c8263.js"]};/*]]>*/</script><script src="/polyfill-a0c9186328768889dad2.js" nomodule=""></script><script src="/webpack-runtime-dcd3cbc25a0495ca7b0b.js" async=""></script><script src="/styles-407fe62976dc5310c43e.js" async=""></script><script src="/framework-dbb498007a7447f28d8e.js" async=""></script><script src="/app-0c9d13cd3361251940a9.js" async=""></script><script src="/component---src-templates-blog-template-js-6c718ebafb10b62c8263.js" async=""></script></body></html>